<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="spring.practice.mapper.memberMapper">
	
	<insert id="join" parameterType="memberVo">
		insert into membertb(
				midx
			,	id
			,	password
			,	nickname
			,	name
			,	email
			,	phone
			,	addr
			,	rdate
			,	delyn
			)values(
				midx_seq.nextval
			,	#{id}
			,	#{password}
			,	#{nickname}
			,	#{name}
			,	#{email}
			,	#{phone}
			,	#{addr}
			,	sysdate
			,	'N'
			)
	</insert>
  	
  	<select id="login" parameterType="memberVo" resultType="memberVo">
  		select midx
  			,  id
  			,  name
  			,  nickname
  		 from  membertb
  		 where id = #{id}
  		 and password = #{password}			   
  	</select>
  	
  	<select id="list" resultType="memberVo" parameterType="searchVo">
  		select midx
  			,  id
  			,  nickname
  			,  name
  			,  email
  			,  phone
  			,  addr
  			,  rdate
  		 from  membertb
  		<if test="searchType == 'id'">
			where id like '%'||#{searchVal}||'%'
		</if>
		<if test="searchType == 'nickname'">
			where nickname like '%'||#{searchVal}||'%'
		</if>
		<if test="searchType == 'name'">
			where name like '%'||#{searchVal}||'%'
		</if>
		<if test="searchType == 'addr'">
			where addr like '%'||#{searchVal}||'%'
		</if>    
  	</select>
  	
  	<select id="selectById" parameterType="String" resultType="int"> 
  		select count(*)
  		from membertb
  		where id=#{id}
  	</select>
  	
  	<select id="selectByNickname" parameterType="String" resultType="int"> 
  		select count(*)
  		from membertb
  		where nickname=#{nickname}
  	</select>
</mapper>